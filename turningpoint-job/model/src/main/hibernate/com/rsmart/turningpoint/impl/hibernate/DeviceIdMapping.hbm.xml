<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<!-- This file generated by Sakai App Builder -AZ -->
<hibernate-mapping package="com.rsmart.turningpoint">
    <class name="com.rsmart.turningpoint.impl.hibernate.TPDeviceIdMapping" table="TT_DEVICE_ID_MAPPING" discriminator-value="0">
		<id name="id" column="ID" type="long">
	    	<generator class="native">
                <param name="sequence">TT_DEVICE_MAP_ID_SEQ</param>
	    	</generator>
		</id>

        <discriminator type="integer" column="OBJECT_TYPE_ID"/>

		<property name="externalDeviceId" column="EXTERNAL_DEVICE_ID" type="string" length="128" not-null="true" />

		<property name="userId" column="USER_ID" type="string" length="99" not-null="true" />

		<property name="deleted" column="DELETED" type="java.lang.Boolean" not-null="true" />

		<property name="createDate" column="CREATE_DATE" type="java.util.Date" />

        <subclass name="com.rsmart.turningpoint.impl.hibernate.TPCourseBasedDeviceIdMapping" discriminator-value="1">
            <property name="siteId" column="SITE_ID" type="string" length="255" not-null="false" />
        </subclass>
    </class>
    
	<query name="TPdeleteDeviceMappings">
	UPDATE TPDeviceIdMapping mapping
	SET mapping.deleted = true
	WHERE mapping.deleted = false
	</query>

</hibernate-mapping>